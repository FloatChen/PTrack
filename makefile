#
# Configuration file PTrack Code
#
SHELL	= /bin/sh

#+++++++++++++++++++++++++++++++++++++++++++++

EXEC	= PTrack

#+++++++++++++++++++++++++++++++++++++++++++++
 
LIBS	= -L/usr/lib -lnetcdff -lnetcdf
INCS	= -I/usr/include

#--------------------------------------------------------------------------
# Compiler Definitions
#--------------------------------------------------------------------------

FC		= gfortran
DEBFLGS	= #-check all -g -fpe0  -traceback  -check bounds -warn all -debug extended
OPT		= -O3

#--------------------------------------------------------------------------

FFLAGS = $(DEBFLGS) $(OPT)

#--------------------------------------------------------------------------
#  Preprocessing and Comilation Directives
#--------------------------------------------------------------------------
.SUFFIXES: .o .f90

.f90.o:
	$(FC)  -c $(FFLAGS) $(INCS) $*.f90

#--------------------------------------------------------------------------
#  Filter Source Code
#--------------------------------------------------------------------------

MODS	= mod_prec.f90 mod_inp.f90 mod_config.f90 mod_io.f90 mod_flow_field.f90 mod_tracking_data.f90 mod_tracking.f90 mod_host.f90
MAIN	= interp_procs.f90 PTrack.f90
SRCS	= $(MODS) $(MAIN)
OBJS	= $(SRCS:.f90=.o)

#--------------------------------------------------------------------------
#  Linking Directives
#--------------------------------------------------------------------------

$(EXEC): $(OBJS)
	$(FC) $(INCS) $(FFLAGS) -o $(EXEC) $(OBJS) $(LIBS)

#--------------------------------------------------------------------------
#  Cleaning targets.
#--------------------------------------------------------------------------

clean:
	/bin/rm -f *.o *.mod

#--------------------------------------------------------------------------
#  Common rules for all Makefiles - do not edit.
#--------------------------------------------------------------------------

emptyrule::

#--------------------------------------------------------------------------
#  Empty rules for directories that do not have SUBDIRS - do not edit.
#--------------------------------------------------------------------------

includes::

